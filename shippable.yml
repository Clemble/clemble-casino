language: java
jdk:
    - oraclejdk8
env:
  global:
    # AWS_ACCESS_KEY_ID
    - secure: JJcW5jsdzeF5LwuZWXoCdXINYeZS2hBkflGwYshVsMtodYkN3UeoAug17w90UE1VvoAXdALeklLWa0TVngw68wVGZuO5ZxjCRyPnNhqjYGlToiS2NI/Iv8fVGg9f3zdKp5OtUYytKml60mIbluVgeaBekDArfjGv3R5rV7Ykmc1f++jYuiu4rfGKVswr1OIqvtXEe8a+gOKUZ8gAdSH9iDf8JTf/DMrLPMpVXMxkeAAbvcgVTNI2SMjO5TSVeTnBHOYU3kebAVa8aVcsmyqsu9OaamgmuxBeFc9lSWmW/5brfZIYLIawaiD2t5wWRz+cbNhP2uuBH4vbsYP7rI/bGA==
    # AWS_SECRET_ACCESS_KEY
    - secure: LS/X2viomQ6NRRpniUmJF2T9MuHt0laBsj4PYooZ7pQfalXr0DqdMUU3IRaOKD6+pb5v1KfkiQi/ZmmQkPbSSJeBjqQgQmy3eT1ItH4o+d5Mcp3bNJqUvR1CxCU5lEDKHt0qLCFThjz9ZrisDo0WYNMcnPT7XCAah26lCXxYbKZn3mMFdFa0L4s+p2L2hFACeJfvo+MOPZRDJehz7JU48FdtIP/UyDFdBkao4OYNlolChSw3vyPmbBTX4Xi0hMCXRnuOGYBHpNQzVOgCp8bsLpTsMoqiAGB87st2xphn8wN+reIP+dpW4C3UmWilZWySJn9FKEhcMfvOL0MuvxlUow==

services:
    - mongodb
    - redis
    - rabbitmq
    - neo4j

before_script:
  - mkdir -p ~/clemble/config
  - mkdir -p ~/clemble-casino/shippable/testresults
  - cp ./config/*.properties ~/clemble/config/

after_success:
#  - mkdir -p deployment/
#  - cp ./server/player/player-registration/target/player-registration-0.12.2-SNAPSHOT.war deployment/player#registration.war
#  - cp ./server/player/player-social/target/player-social-0.12.2-SNAPSHOT.war  deployment/player#social.war
#  - cp ./server/player/player-presence/target/player-presence-0.12.2-SNAPSHOT.war deployment/player#presence.war
#  - cp ./server/player/player-profile/target/player-profile-0.12.2-SNAPSHOT.war deployment/player#profile.war
#  - cp ./server/player/player-connection/target/player-connection-0.12.2-SNAPSHOT.war deployment/player#connection.war
#
#  - cp ./server/payment/payment-transaction/target/payment-transaction-0.12.2-SNAPSHOT.war deployment/payment.war
#  - cp ./server/payment/payment-bonus/target/payment-bonus-0.12.2-SNAPSHOT.war deployment/bonus.war
#
#  - cp ./server/goal/goal-configuration/target/goal-configuration-0.12.2-SNAPSHOT.war deployment/goal#configuration.war
#  - cp ./server/goal/goal-construction/target/goal-construction-0.12.2-SNAPSHOT.war deployment/goal#construction.war
#  - cp ./server/goal/goal-management/target/goal-management-0.12.2-SNAPSHOT.war deployment/goal#management.war
#
#  - cd deployment/ && tar -czvf ../clemble-api.tar.gz . && cd ..

  - virtualenv ve && source ve/bin/activate && pip install awscli

#  - aws s3 cp ./clemble-api.tar.gz s3://clemble/production/clemble-api.tar.gz

  - aws s3 cp ./server/player/player-registration/target/player-registration-0.12.2-SNAPSHOT.war s3://clemble/production/api/player/registration.war
  - aws s3 cp ./server/player/player-social/target/player-social-0.12.2-SNAPSHOT.war s3://clemble/production/api/player/social.war
  - aws s3 cp ./server/player/player-presence/target/player-presence-0.12.2-SNAPSHOT.war s3://clemble/production/api/player/presence.war
  - aws s3 cp ./server/player/player-profile/target/player-profile-0.12.2-SNAPSHOT.war s3://clemble/production/api/player/profile.war
  - aws s3 cp ./server/player/player-connection/target/player-connection-0.12.2-SNAPSHOT.war s3://clemble/production/api/player/connection.war

  - aws s3 cp ./server/payment/payment-transaction/target/payment-transaction-0.12.2-SNAPSHOT.war s3://clemble/production/api/payment/payment.war
  - aws s3 cp ./server/payment/payment-bonus/target/payment-bonus-0.12.2-SNAPSHOT.war s3://clemble/production/api/payment/bonus.war

  - aws s3 cp ./server/goal/goal-configuration/target/goal-configuration-0.12.2-SNAPSHOT.war s3://clemble/production/api/goal/configuration.war
  - aws s3 cp ./server/goal/goal-construction/target/goal-construction-0.12.2-SNAPSHOT.war s3://clemble/production/api/goal/construction.war
  - aws s3 cp ./server/goal/goal-management/target/goal-management-0.12.2-SNAPSHOT.war s3://clemble/production/api/goal/management.war


