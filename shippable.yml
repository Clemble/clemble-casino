language: java
jdk:
    - oraclejdk8
services:
    - mongodb
    - redis
    - rabbitmq
    - neo4j
install:
  - sudo apt-get install python-pip
  - sudo pip install awscli
env:
  global:
    - secure: TDeG4a2Nzt04Wc4JM5HKVAIZvk7wUwh3MblIavaU+3bj6uS8QskmAKVGmVDLw1XHB+PzXlDLGmYr9rZo+fbTNiQ8OypAiWvwD/tvd+KbkBXBYiit/nXbt+CtziRKbEuctdWjCBcTJ/prW31iylf4At1fdE8FzSA6mpFEWtzl00ARZ4uS8MpdIMKepXw9bz/ytywhhzR7Ua4VQPjAxjrnn829jbXPFi5rgIIPeHtlhFcsWd0Q0WXmhDdl8RUCICZ/bP0yxneZ7iMlVY2pss3M7sDORJUFpUFeL3PDTXUGyX6eEiT9dSfxgkxcYW5UR9/h5voxnMOSIjpPKFy6mlIuKQ==
    - secure: SBmubE4FiLXZI/aaBqnFjlLYNyUPsCfgn383090r+hbuMGN+4tCifRnTr7vKEPgHBpa072CcdvfqIAJN07dsIaP1sj+nqHOyIwqT1d5tkq6qeLe/gZHeQSIqQo2NGSW2Ywy3HPU8Vi4MABtTCJlbBLwi/wvNjqxQzC+golvYi7bNri1LI+KFQe0kRs8m36AJf7dfhjk/+pwEzZSOQyFPqjvPvl1V3+L2fVXUjw2Xv6V/S6lK+5V/ex2jGqG/FIfYrEjo2VKQ9rNjq4BuBYu8avJofToXxELaRm+s+hknHDDVxyFgaPFs0LSja+RzU//TWGNKw0vlUqhSLOOoCctB+A==
    - secure: UNx8QKhwGwjpFGj5qJtuh4Ds4ErO7azIvXGDMvvu/W8lVoFZZ+8e0NxzNrCQfZuUqM+gshMcy2MlzyFtu0ZiTZHcUH4Oj5e5ifXMLacoINErj+303xvFaDjO5kVGBDZ9gMjBQ6UcCGBwTB16M+zSYIOH/gyBiUgkcfxfX325ctO5l0kmiULL2iba5gPff4yrUtnwaa7/FkX2P5MLolsGEJURFW3xEcaC6lQRK90N7aqptNham0kdgIPuH6xj3RgKMQeYW1RHeGWwZrY7JhsHy6V4Rz3cHZZM7OwgB9L/emii4/Low7aTYNnsS1zUgupzaRetd7G4Du5pbwq6O81JcA==
    - secure: MQrdtV90hr3phOX6sL2kN2XpRRtuSaNYI0F7SOxCDZtA9J1r8Vo0TWW6AXtdY7pTBqmAsOul2MABO6Q1c9eMbzq998o+LR785neHaIIs2yMMVFucjfYgsDTkZ+mcGltQp9t416nLu+qha630BFe6kV/Jt6ZLPhGbFyf/hgZaWKn60E4Lxx9dP/qhm7Qr9Uy2k2HKhRU/C21pFV/hOt70vhOtWni+c8WhGdHAjSffjdOJwvsT35kGh1rM5/MAKOwZd+mUfGepmr+o3vVWW9aG3iytmQ4uR4HuovZkBHitS2WT3iqQCiiV0IXc1Aawrk+P09DZDmY2E+B64vn8gtsbRg==
before_script:
    - mkdir -p ~/clemble/config
    - cp ./config/*.properties ~/clemble/config/
after_success:
    - aws s3 cp ./server/player/player-web/target/player-web-0.9.0-SNAPSHOT.war s3://clemble/player/player-web-0.9.0-SNAPSHOT.war
    - mvn clean cobertura:cobertura coveralls:cobertura
