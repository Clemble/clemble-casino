<html>
	<head>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>
		<script src="./assets/js/stomp.js"></script>
		<link href="./assets/bootstrap/css/bootstrap.css" rel="stylesheet">
		<link href="./assets/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
		<title>RabbitMQ Web STOMP: Socket</title>
	</head>
<body lang="en">
	<h1>
		<a href="index.html">RabbitMQ Web STOMP</a> Socket
	</h1>
	<script>
		Stomp.WebSocketClass = SockJS;

		var client = Stomp.client('http://localhost:15674/stomp');

		client.debug = function() {
			if (window.console && console.log && console.log.apply) {
				console.log.apply(console, arguments);
			}
		};

		send = function(data) {
			client.send('/topic/', {}, data);
		};

		var on_connect = function(x) {
			id = client.subscribe('/topic/6', function(d) {
				var p = JSON.parse(d.body);
				lines.push(p);
				draw(p, true);
			});
		};

		var on_error = function() {
			console.log('error');
		};

		client.connect('guest', 'guest', on_connect, on_error, '/');

</script>
</body>
</html>